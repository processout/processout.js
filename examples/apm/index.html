<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
  <title>ProcessOut.js Native APM</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<div id="apm-container"></div>
<script src="../../dist/processout.js" crossorigin="anonymous"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // You need to replace these values with your own
    // ProcessOut
    const projectId = "test-proj_qEi1u5BwoYcZb6mOMKDWIm4mpqKCq6bN"
    const gatewayConfigurationId = "gway_conf_2puMFv3iwrPSLqslIfVcvzhFWZzmTHTy.sandbox"
    const invoiceId = "iv_PMIMKkaXcZXxnXPXzKQzHOu8jz10CQgW"
    // PowaPay
    // const projectId = "test-proj_2yMu3kr1Xx75RtW1aI4bJTQzu32gxWiV"
    // const gatewayConfigurationId = "gway_conf_mcllxxya8c013330fhl62f0t628qy75f"
    // const invoiceId = "iv_hCECpTUKArd6I02TATtDkfeR0dLKGQzM"

    const client = new ProcessOut.ProcessOut(projectId)
    const el = document.querySelector('#apm-container')

    const apm = client.createTokenizationFlow(el, {
      gatewayConfigurationId,
      invoiceId,
    })

    apm.on('success', () => {
      console.log('apm done')
      apm.cleanUp()
    })

    apm.on('critical-failure', ({ message }) => {
      console.log('apm', message)
    })

    apm.initialise();
  })
</script>
</body>
</html>
